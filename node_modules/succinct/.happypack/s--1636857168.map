{"version":3,"sources":["lib/model/index.js"],"names":["Object","defineProperty","exports","value","constant_1","require","succinct_1","context_1","initialSuccinc","IDENTITY","default","enhancerModel","target","key","descriptor","des","configurable","enumerable","get","currentContext","getContext","set","newValue","Model","bind"],"mappings":"AAAAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAIC,aAAaC,QAAQ,qBAAR,CAAjB;AACA,IAAIC,aAAaD,QAAQ,aAAR,CAAjB;AACA,IAAIE,YAAYF,QAAQ,YAAR,CAAhB;AACA,SAASG,cAAT,CAAwBL,KAAxB,EAA+B;AAC3B,QAAIA,MAAMC,WAAWK,QAAjB,CAAJ,EACI;AACJN,UAAMC,WAAWK,QAAjB,IAA6B,IAAIH,WAAWI,OAAf,EAA7B;AACH;AACD;AACA;AACA,SAASC,aAAT,CAAuBC,MAAvB,EAA+BT,KAA/B,EAAsCU,GAAtC,EAA2CC,UAA3C,EAAuD;AACnD;AACA;AACA;AACAN,mBAAeL,KAAf;AACA,QAAIY,MAAM;AACNC,sBAAc,IADR;AAENC,oBAAYH,WAAWG,UAFjB;AAGNC,aAAK,eAAY;AACb,gBAAIC,iBAAiBZ,UAAUG,OAAV,CAAkBU,UAAlB,EAArB;AACA,mBAAO,KAAKhB,WAAWK,QAAhB,EAA0BS,GAA1B,CAA8BL,GAA9B,EAAmCM,cAAnC,CAAP;AACH,SANK;AAONE,aAAK,aAAUC,QAAV,EAAoB;AACrB,iBAAKlB,WAAWK,QAAhB,EAA0BY,GAA1B,CAA8B,IAAIT,MAAJ,CAAWU,QAAX,CAA9B;AACH;AATK,KAAV;AAWA,WAAOP,GAAP;AACH;AACD,SAASQ,KAAT,CAAeX,MAAf,EAAuB;AACnB,WAAOD,cAAca,IAAd,CAAmB,IAAnB,EAAyBZ,MAAzB,CAAP;AACH;AACDV,QAAQQ,OAAR,GAAkBa,KAAlB","file":"index.js","sourceRoot":"/Users/sheweichun/opensource/succinct/packages/succinct","sourcesContent":["Object.defineProperty(exports, \"__esModule\", { value: true });\nvar constant_1 = require(\"../commons/constant\");\nvar succinct_1 = require(\"../succinct\");\nvar context_1 = require(\"../context\");\nfunction initialSuccinc(value) {\n    if (value[constant_1.IDENTITY])\n        return;\n    value[constant_1.IDENTITY] = new succinct_1.default();\n}\n// function enhancerModel<T>(target: new (state: any) => T, value: any);\n// function enhancerModel<T>(target: new (state: any) => T, value: any, key: string, descriptor: Descriptor);\nfunction enhancerModel(target, value, key, descriptor) {\n    // if (key && descriptor) {\n    // }\n    // return new target(value); \n    initialSuccinc(value);\n    var des = {\n        configurable: true,\n        enumerable: descriptor.enumerable,\n        get: function () {\n            var currentContext = context_1.default.getContext();\n            return this[constant_1.IDENTITY].get(key, currentContext);\n        },\n        set: function (newValue) {\n            this[constant_1.IDENTITY].set(new target(newValue));\n        }\n    };\n    return des;\n}\nfunction Model(target) {\n    return enhancerModel.bind(null, target);\n}\nexports.default = Model;\n"]}